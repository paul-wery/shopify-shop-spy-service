{
  "version": 3,
  "sources": ["../../../../src/crons/shopify.ts"],
  "sourcesContent": ["import { getShops } from '@src/mongodb/getShops';\nimport { Range, RecurrenceRule, scheduleJob } from 'node-schedule';\n\nimport { client } from '@src/mongodb/conf';\nimport { spyShop } from '@src/shopify/spyShop';\nimport { collectThemes } from '@src/shopify/collectThemes';\nimport { collectApps } from '@src/shopify/collectApps';\nimport { findShopsApps } from '@src/shopify/findShopsApps';\n\nexport const startCollectApps = async () => {\n  // await collectApps();\n  await findShopsApps();\n  // const rule = new RecurrenceRule();\n\n  // rule.hour = 0;\n  // rule.minute = 0;\n\n  // const job = scheduleJob(rule, async () => {\n  //   await client.connect();\n  //   console.info('RUNNING startCollectApps');\n  //   await collectApps();\n  //   console.info('Done CollectApps!');\n  // });\n\n  // return job;\n};\n\nexport const startCollectThemes = async () => {\n  const rule = new RecurrenceRule();\n\n  rule.hour = 0;\n  rule.minute = 0;\n\n  const job = scheduleJob(rule, async () => {\n    await client.connect();\n    console.info('RUNNING startCollectThemes');\n    await collectThemes();\n    console.info('Done CollectThemes!');\n  });\n\n  return job;\n};\n\nexport const startSpyShops = async () => {\n  const rule = new RecurrenceRule();\n\n  rule.second = new Range(0, 59, 60);\n\n  const job = scheduleJob(rule, async () => {\n    await client.connect();\n    console.info('RUNNING startSpyShops');\n    const shops = await getShops();\n    const promises = [];\n\n    for (let index = 0; index < shops.length; index++) {\n      const shop = shops[index];\n\n      promises.push(spyShop(shop));\n    }\n    await Promise.all(promises);\n    console.info('Done SpyShops!');\n  });\n\n  return job;\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAyB;AACzB,2BAAmD;AAEnD,kBAAuB;AACvB,qBAAwB;AACxB,2BAA8B;AAE9B,2BAA8B;AAEvB,MAAM,mBAAmB,YAAY;AAE1C,YAAM,oCAAc;AActB;AAEO,MAAM,qBAAqB,YAAY;AAC5C,QAAM,OAAO,IAAI,oCAAe;AAEhC,OAAK,OAAO;AACZ,OAAK,SAAS;AAEd,QAAM,UAAM,kCAAY,MAAM,YAAY;AACxC,UAAM,mBAAO,QAAQ;AACrB,YAAQ,KAAK,4BAA4B;AACzC,cAAM,oCAAc;AACpB,YAAQ,KAAK,qBAAqB;AAAA,EACpC,CAAC;AAED,SAAO;AACT;AAEO,MAAM,gBAAgB,YAAY;AACvC,QAAM,OAAO,IAAI,oCAAe;AAEhC,OAAK,SAAS,IAAI,2BAAM,GAAG,IAAI,EAAE;AAEjC,QAAM,UAAM,kCAAY,MAAM,YAAY;AACxC,UAAM,mBAAO,QAAQ;AACrB,YAAQ,KAAK,uBAAuB;AACpC,UAAM,QAAQ,UAAM,0BAAS;AAC7B,UAAM,WAAW,CAAC;AAElB,aAAS,QAAQ,GAAG,QAAQ,MAAM,QAAQ,SAAS;AACjD,YAAM,OAAO,MAAM,KAAK;AAExB,eAAS,SAAK,wBAAQ,IAAI,CAAC;AAAA,IAC7B;AACA,UAAM,QAAQ,IAAI,QAAQ;AAC1B,YAAQ,KAAK,gBAAgB;AAAA,EAC/B,CAAC;AAED,SAAO;AACT;",
  "names": []
}
